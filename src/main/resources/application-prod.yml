spring:
  datasource:
    url: jdbc:postgresql://postgres:5432/terminology_db
    driver-class-name: org.postgresql.Driver
    username: terminology_user
    password: terminology_password
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        format_sql: false
        dialect: org.hibernate.dialect.PostgreSQLDialect
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true

  redis:
    host: redis
    port: 6379
    timeout: 2000ms
    lettuce:
      pool:
        max-active: 20
        max-idle: 10
        min-idle: 5

  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: https://abha.gov.in/oauth2

# Production logging
logging:
  level:
    root: INFO
    in.gov.ayush.terminology: INFO
    org.springframework.security: WARN
    org.hibernate.SQL: WARN
    org.hibernate.type.descriptor.sql.BasicBinder: WARN
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
  file:
    name: /app/logs/application.log
    max-size: 100MB
    max-history: 30

# Management endpoints
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when-authorized
  metrics:
    export:
      prometheus:
        enabled: true

# ICD-11 API Configuration
icd11:
  api:
    base-url: https://id.who.int/icd/release/11/2019-04
    client-id: e3d3a654-ab4a-4724-a5f2-233273acfd62_054e395f-02df-4b7d-ae4f-e42ca8e91fb4
    client-secret: YtjXAM/CqQk1cQMLsCnfzkUADk80psKpdMMRP6TLVJM=
    token-url: https://icdaccessmanagement.who.int/connect/token
    scope: icdapi_access
    timeout: 30000
    retry-attempts: 3

# FHIR Configuration
fhir:
  server:
    base-url: https://terminology.ayush.gov.in/fhir-terminology
  namaste:
    code-system: http://terminology.ayush.gov.in/CodeSystem/namaste
    version: "1.0"
  icd11:
    code-system: http://id.who.int/icd/release/11/2019-04
    tm2-system: http://id.who.int/icd/release/11/2019-04/tm2

# Audit Configuration
audit:
  enabled: true
  retention-days: 2555  # 7 years
  batch-size: 100
  async: true

# CSV Data Configuration
csv:
  namaste-file: classpath:data/namaste_codes.csv
  backup-enabled: true
  backup-location: /app/data/backup

# Cache Configuration
cache:
  namaste:
    ttl: 3600  # 1 hour
    max-size: 10000
  icd11:
    ttl: 7200  # 2 hours
    max-size: 50000
  mappings:
    ttl: 1800  # 30 minutes
    max-size: 5000

# Performance Configuration
performance:
  async:
    core-pool-size: 10
    max-pool-size: 50
    queue-capacity: 100
  batch:
    size: 1000
    timeout: 30000
